{
  "id": "48cca7b7",
  "title": "Extract synchronization algorithm core",
  "tags": [
    "extraction",
    "core"
  ],
  "status": "closed",
  "created_at": "2026-02-01T07:24:53.766Z"
}

# Extract Core Synchronization Files - DONE

Vendored the following files into `compiler/src/align/`:

| File | Lines | Purpose |
|------|-------|---------|
| `fuzzy.ts` | ~150 | Levenshtein n-gram search |
| `semantics.ts` | ~30 | HTML block element definitions |
| `nlp.ts` | ~20 | Sentence tokenization (wink-nlp) |
| `getSentenceRanges.ts` | ~300 | Match sentences → timestamps, interpolate |
| `audio.ts` | ~40 | ffprobe wrapper for track duration |
| `index.ts` | ~20 | Module exports |

## Modifications Made
- Replaced echogarden types with our own `Transcription` / `WordTimelineEntry`
- Replaced `@/audio` import with local `audio.ts`
- Added dual copyright headers (Shane Friedman + Ryan Johnson)
- Updated tsconfig to ES2023 for `findLast` support
- Added wink-nlp dependencies to package.json

## Build
✅ `npm run build` passes
