{
  "id": "84d4d281",
  "title": "Player: clean up buildHealth dependency-analysis violations",
  "tags": [
    "player",
    "tooling",
    "dependencies",
    "maintenance"
  ],
  "status": "closed",
  "created_at": "2026-02-10T05:33:52.168Z"
}

`player/scripts/verify.sh` now fails when dependency-analysis reports violations, so the current `buildHealth` advice must be addressed.

Source report:
- `player/build/reports/dependency-analysis/build-health-report.txt`

Current advice to resolve:

1) Remove unused dependencies:
- `implementation("androidx.compose.ui:ui-tooling-preview:1.5.4")`
- `implementation("androidx.core:core-ktx:1.12.0")`
- `implementation("androidx.lifecycle:lifecycle-runtime-ktx:2.6.2")`

2) Declare direct dependencies currently used transitively:
- `androidx.activity:activity:1.8.1`
- `androidx.compose.foundation:foundation-layout:1.5.4`
- `androidx.compose.foundation:foundation:1.5.4`
- `androidx.compose.runtime:runtime:1.5.4`
- `androidx.compose.ui:ui-geometry:1.5.4`
- `androidx.compose.ui:ui-text:1.5.4`
- `androidx.compose.ui:ui-unit:1.5.4`
- `androidx.core:core:1.12.0`
- `androidx.lifecycle:lifecycle-viewmodel:2.6.2`
- `androidx.media3:media3-common:1.2.0`
- `org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4`
- `org.jetbrains.kotlinx:kotlinx-serialization-core:1.6.0`

3) Change configuration:
- `debugImplementation("androidx.compose.ui:ui-test-manifest:1.5.4")`
  -> `debugRuntimeOnly(...)`

Acceptance:
- `./player/scripts/verify.sh` exits 0
- `buildHealth` no longer reports dependency violations

## Completed (2026-02-10)
- Updated `player/app/build.gradle.kts` dependencies per dependency-analysis advice:
  - Removed unused direct deps:
    - `androidx.compose.ui:ui-tooling-preview`
    - `androidx.core:core-ktx`
    - `androidx.lifecycle:lifecycle-runtime-ktx`
  - Added required direct deps:
    - `androidx.activity:activity:1.8.1`
    - `androidx.compose.foundation:foundation`
    - `androidx.compose.foundation:foundation-layout`
    - `androidx.compose.runtime:runtime`
    - `androidx.compose.ui:ui-geometry`
    - `androidx.compose.ui:ui-text`
    - `androidx.compose.ui:ui-unit`
    - `androidx.core:core:1.12.0`
    - `androidx.lifecycle:lifecycle-common:2.6.2`
    - `androidx.lifecycle:lifecycle-viewmodel:2.6.2`
    - `androidx.media3:media3-common:1.2.0`
    - `org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4`
    - `org.jetbrains.kotlinx:kotlinx-serialization-core:1.6.0`
  - Changed `ui-test-manifest` to `debugRuntimeOnly`.
- Resolved remaining stdlib advice by:
  - Setting `kotlin.stdlib.default.dependency=false` in `player/gradle.properties`
  - Declaring `implementation("org.jetbrains.kotlin:kotlin-stdlib:1.9.20")` in app deps.

## Verification
- Ran `cd player && ./scripts/verify.sh`.
- Result: **PASS**.
- `buildHealth` now reports no violations and `player/build/reports/dependency-analysis/build-health-report.txt` is empty.
