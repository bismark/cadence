{
  "id": "224d3869",
  "title": "[P0] Bundle format: precompute float geometry + baselineY for each text run",
  "tags": [
    "compiler",
    "bundle-format",
    "rendering",
    "p0"
  ],
  "status": "closed",
  "created_at": "2026-02-10T06:10:03.885Z"
}

Maintain the architecture rule: **player is a dumb painter**.

Current issue:
- Geometry is rounded in compiler and baseline is estimated in player.

Scope:
- Extend text run schema to include precomputed `baselineY` (page-local).
- Preserve subpixel geometry from Chromium where useful (x/y/width/height as float in bundle schema).
- Carry through highlight rect precision (avoid unnecessary rounding).

Acceptance criteria:
- Bundle contains all metrics required to draw text exactly without runtime metric estimation.
- Player no longer computes baseline heuristics.
- No backward-compat/versioning work is required in current POC mode.

## Completion notes (2026-02-12)
- Removed compiler-side coordinate rounding in `paginate.ts` (`x/y/width/height` and `baselineY` now preserve Chromium float geometry).
- Added `contentX` / `contentY` to page schema so viewport placement is explicit in bundle data.
- Propagated new page fields through serialization (`compact-page-styles.ts`) and preview loader/renderer (`preview.ts`).
- Updated bundle format documentation with new fields and float geometry examples.
