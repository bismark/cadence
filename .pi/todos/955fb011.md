{
  "id": "955fb011",
  "title": "[P1] Restrict Playwright pagination to EPUB-local resources only",
  "tags": [
    "compiler",
    "security",
    "pagination",
    "p1"
  ],
  "status": "open",
  "created_at": "2026-02-10T05:56:49.081Z"
}

During pagination we now preserve `<link rel="stylesheet">` from EPUB content and inject a `<base>` pointing at `https://epub.local`. The route handler only intercepts `https://epub.local/**`, so absolute URLs in EPUB content can still trigger external requests from Chromium.

## Why this matters
This allows untrusted EPUB input to cause outbound/internal network fetches (SSRF/privacy risk) and can make compiles non-deterministic.

## Scope
- `compiler/src/layout/paginate.ts`
- `compiler/src/epub/xhtml.ts` (where stylesheet links are preserved)

## Acceptance criteria
- All network requests during pagination are blocked by default.
- Only virtual EPUB-origin resources (`https://epub.local/**`) are allowed.
- Non-EPUB requests fail explicitly with clear diagnostics.
- Add regression test(s) with an EPUB containing an absolute stylesheet URL to verify no outbound fetch occurs.
