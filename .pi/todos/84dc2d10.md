{
  "id": "84dc2d10",
  "title": "Add automated testing for compiler",
  "tags": [
    "compiler",
    "testing",
    "wishlist"
  ],
  "status": "open",
  "created_at": "2026-02-01T06:48:57.485Z"
}

## Goal
Automated test suite for the compiler to catch regressions.

## Test Categories
1. **Unit tests** - Individual functions (SMIL parsing, XHTML normalization, etc.)
2. **Integration tests** - Full compilation pipeline with test EPUBs
3. **Snapshot tests** - Compare bundle output against known-good baselines
4. **Validation tests** - Ensure output bundles pass validation

## Test Cases
- Parse various SMIL structures
- Handle malformed input gracefully
- Correct span timing after audio concatenation
- Accurate page layout and rect extraction
- Bundle format compliance

## Tools
- Vitest or Jest for Node.js testing
- Fixtures directory with test EPUBs
- CI integration (GitHub Actions)

## Files
- `compiler/test/` - Test files
- `compiler/vitest.config.ts` or similar
