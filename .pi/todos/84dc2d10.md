{
  "id": "84dc2d10",
  "title": "Add automated testing for compiler",
  "tags": [
    "compiler",
    "testing",
    "wishlist"
  ],
  "status": "closed",
  "created_at": "2026-02-01T06:48:57.485Z"
}

# Automated testing for compiler - DONE

Set up vitest with alignment tests using Storyteller fixtures.

## Test Coverage
- `getChapterDuration` - duration calculation
- `interpolateSentenceRanges` - gap filling algorithm  
- `expandEmptySentenceRanges` - overlap/empty handling
- `getSentenceRanges` - core alignment with real transcription data

## Fixtures
- `mobydick-transcription.json` - 2.3MB transcription with word timeline
- `mobydick-expected-ranges.json` - expected sentence ranges

## Commands
```bash
npm test        # run once
npm test:watch  # watch mode
```

## Future Improvements
- Add sentence extraction tests (parse5)
- Add sentence tagging tests
- Add end-to-end alignment test with real EPUB
