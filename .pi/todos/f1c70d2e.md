{
  "id": "f1c70d2e",
  "title": "Create CLI entry point and orchestration",
  "tags": [
    "cli",
    "orchestration"
  ],
  "status": "closed",
  "created_at": "2026-02-01T07:24:53.835Z"
}

# Create CLI entry point and orchestration - DONE

Full alignment pipeline implemented!

```bash
cadence-compile align \
  -e book.epub \
  -a audiobook.m4b \
  -o book.bundle \
  --no-zip
```

## Pipeline Steps (all implemented)

1. ✅ Prepare audio tracks (extract chapters from m4b)
2. ✅ Transcribe with parakeet-mlx
3. ✅ Open EPUB and parse spine
4. ✅ For each chapter:
   - Extract sentences from XHTML
   - Find chapter offset in transcription (fuzzy search)
   - Get sentence ranges with timestamps
   - Interpolate missing ranges
   - Tag sentences with `<span id="...">`
   - Create Span objects with timing
5. ✅ Paginate with Chromium
6. ✅ Map spans to pages
7. ✅ Copy audio files
8. ✅ Write bundle

## Files Modified
- `compiler/src/index.ts` - Added `align` command with full pipeline
- `compiler/src/align/sentences.ts` - Sentence extraction and tagging for parse5
