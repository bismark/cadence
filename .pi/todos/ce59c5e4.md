{
  "id": "ce59c5e4",
  "title": "Compiler: unsupported-feature scanner with compile warnings",
  "tags": [
    "compiler",
    "diagnostics",
    "p0"
  ],
  "status": "closed",
  "created_at": "2026-02-06T16:24:27.571Z"
}

During compile, detect known high-risk EPUB features and emit actionable warnings instead of failing silently.

## Initial detections
- tables / complex table layout
- floats / absolute positioning
- ruby / MathML / SVG-heavy text flow
- RTL / vertical writing modes
- fixed-layout indicators

## Acceptance criteria
- Warnings include file/chapter and detected feature.
- Summary section groups counts by feature type.
- Output clearly distinguishes 'unsupported' vs 'degraded but compiled'.

## Completion notes (2026-02-12)
- Added unsupported/degraded feature scanner in `compiler/src/validation/unsupported-features.ts`.
  - Scans OPF + chapter XHTML + linked/inline CSS.
  - Detects: fixed-layout indicators, tables, float/absolute positioning, ruby, MathML, SVG, RTL directionality, vertical writing modes.
  - Emits per-warning file/chapter context with actionable details.
- Added grouped summary output by feature type, split by severity:
  - `Unsupported`
  - `Degraded but compiled`
- Wired scanner into both compile and align pipelines in `compiler/src/index.ts`.
  - Scanner failures are non-fatal and reported as warnings.
- Added tests in `compiler/test/unsupported-features.test.ts` covering:
  - detection + warning shape + summary grouping
  - log output distinction between unsupported vs degraded sections
- Verification run:
  - `cd compiler && npm run build`
  - `cd compiler && npm test -- unsupported-features.test.ts`
  - `cd compiler && npm test`
