{
  "id": "68357f1c",
  "title": "[P0] Player renderer: consume precomputed baselineY and remove computeBaselineY",
  "tags": [
    "player",
    "rendering",
    "architecture",
    "p0"
  ],
  "status": "closed",
  "created_at": "2026-02-10T17:55:27.419Z"
}

Goal: make renderer a direct painter of compiler geometry.

Scope:
- Add `baselineY` to player bundle model (`player/.../Bundle.kt`).
- Update `PageRenderer.kt` to draw text using `textRun.baselineY` + margin and remove runtime baseline computation.
- Keep style/typeface behavior unchanged.

Acceptance:
- Player loads bundle with baselineY.
- No `computeBaselineY` helper remains in renderer path.
- Run required player verification script (`player/scripts/verify.sh`), noting existing dependency-analysis violations if still present.

Implemented player-side baselineY consumption:

- Added `baselineY: Float` to `TextRun` in `player/app/src/main/java/com/cadence/player/data/Bundle.kt`.
- Updated `PageRenderer.kt` to draw text using compiler-provided baseline (`textRun.baselineY + marginTop`).
- Removed runtime `computeBaselineY(...)` helper entirely.
- Debug baseline guide now also uses `textRun.baselineY`.

Validation:
- Installed player build and rendered v12 bundle successfully.
- Screenshot shows no visual regression vs prior tuned pass.
- Ran required verification script: `player/scripts/verify.sh` (via skill run.sh).
  - compile/detekt/lint pass.
  - known pre-existing dependency-analysis violations still fail buildHealth (`player/build/reports/dependency-analysis/build-health-report.txt`).
